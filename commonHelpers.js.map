{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/img/icon.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function searchImages(query, page) {\n    const baseURL = 'https://pixabay.com/api/';\n    const response = await axios.get(baseURL, {\n        params: {\n            key: '42530845-4f1978a0628226c655e2788d5',\n            q: `${query}`,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: page\n        }\n    })\n    return response.data\n}\n\n","export const gallery = document.querySelector('.gallery');\n\nfunction newImages({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) {\n    return `<a class = 'img-box' href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n                <div class=\"info-box\">\n                    <p class=\"info\"><b>Likes</b> ${likes}</p>\n                    <p class=\"info\"><b>Views</b> ${views}</p>\n                    <p class=\"info\"><b>Comments</b> ${comments}</p>\n                    <p class=\"info\"><b>Downloads</b> ${downloads}</p>\n                </div>\n            </a>`\n}\n\nexport function createGallery(elements) {\n    const markup = elements.map(newImages).join('');\n    return gallery.insertAdjacentHTML('beforeend', markup);\n}\n","export default \"__VITE_ASSET__65a791c1__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchImages } from './js/pixabay-api';\nimport { createGallery, gallery } from './js/render-function';\nimport icon from './img/icon.svg'\n\nconst form = document.querySelector('.form');\nconst loading = document.querySelector('.loading')\nconst btnLoadMore = document.querySelector('.load-more')\n\nfunction scrollAfterLoadind() {\n    const imgBox = document.querySelector('.img-box');\n    const boxSize = imgBox.getBoundingClientRect();\n    if (boxSize.height > 0) {\n        let scrollHeight = boxSize.height * 2;\n        window.scrollBy({\n            top: scrollHeight,\n            behavior: 'smooth'\n        })\n    }\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 100\n})\n\nlet query;\nlet page;\n\nform.addEventListener('submit', showGallery)\n\nasync function showGallery(event) {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    query = form.search.value.trim().replace(/\\s/g, \"+\");\n    if (query && query !== '') {\n        page = 1;\n        loading.classList.add('loader');\n        try {\n            const data = await searchImages(query, page);\n            if (data.total !== 0) {\n                loading.classList.remove('loader');\n                createGallery(data.hits);\n                lightbox;\n                lightbox.refresh();\n                btnLoadMore.classList.remove('hidden');\n                if (data.totalHits < 15) {\n                    btnLoadMore.classList.add('hidden')\n                }\n            } else {\n                iziToast.show({\n                    iconUrl: icon,\n                    message: `Sorry, there are no images matching your search query. Please try again!`,\n                    messageColor: '#ffffff',\n                    color: '#FF6868',\n                    position: 'topRight',\n                    progressBarColor: '#ffffff',\n                    close: false,\n                    timeout: 5000\n                });\n                loading.classList.remove('loader');\n                btnLoadMore.classList.add('hidden')\n            }\n        }\n        catch (error) {\n            iziToast.show({\n                iconUrl: icon,\n                message: `Sorry, there is a problem - ${error}!`,\n                messageColor: '#ffffff',\n                color: '#FF7F50',\n                position: 'topRight',\n                progressBarColor: '#ffffff',\n                close: false,\n                timeout: 5000\n            });\n            console.log(error);\n            loading.classList.remove('loader');\n        }\n        finally {\n            form.reset()  \n        }\n    } else {\n        btnLoadMore.classList.add('hidden');\n        return;\n    }\n}\n\nbtnLoadMore.addEventListener('click', loadMore);\n\nasync function loadMore() {\n    loading.classList.add('loader');\n    btnLoadMore.classList.add('hidden');\n    page++;\n    try {\n        const newData = await searchImages(query, page);\n        loading.classList.remove('loader');\n        createGallery(newData.hits);\n        scrollAfterLoadind();\n        btnLoadMore.classList.remove('hidden');\n        lightbox.refresh();\n        if (newData.hits.length < 15) {\n            btnLoadMore.classList.add('hidden');\n            iziToast.show({\n                iconUrl: icon,\n                message: `\"We're sorry, but you've reached the end of search results`,\n                messageColor: '#ffffff',\n                color: '#1e81b0',\n                position: 'topRight',\n                progressBarColor: '#ffffff',\n                close: false,\n                timeout: 5000\n            })\n        }\n    }\n    catch (error) {\n        iziToast.show({\n                iconUrl: icon,\n                message: `Sorry, there is a problem - ${error}!`,\n                messageColor: '#ffffff',\n                color: '#FF7F50',\n                position: 'topRight',\n                progressBarColor: '#ffffff',\n                close: false,\n                timeout: 5000\n            });\n        console.log(error);\n        loading.classList.remove('loader')\n    }\n} \n\n\n"],"names":["searchImages","query","page","baseURL","axios","gallery","newImages","largeImageURL","webformatURL","tags","likes","views","comments","downloads","createGallery","elements","markup","icon","form","loading","btnLoadMore","scrollAfterLoadind","boxSize","scrollHeight","lightbox","SimpleLightbox","showGallery","event","data","iziToast","error","loadMore","newData"],"mappings":"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"}